{"ast":null,"code":"const noteMatrix = [[{\n  '#': 10,\n  'char': 'C𝄫'\n}, {\n  '#': 11,\n  'char': 'C♭'\n}, {\n  '#': 0,\n  'char': 'C'\n}, {\n  '#': 1,\n  'char': 'C♯'\n}, {\n  '#': 2,\n  'char': 'C𝄪'\n}], [{\n  '#': 0,\n  'char': 'D𝄫'\n}, {\n  '#': 1,\n  'char': 'D♭'\n}, {\n  '#': 2,\n  'char': 'D'\n}, {\n  '#': 3,\n  'char': 'D♯'\n}, {\n  '#': 4,\n  'char': 'D𝄪'\n}], [{\n  '#': 2,\n  'char': 'E𝄫'\n}, {\n  '#': 3,\n  'char': 'E♭'\n}, {\n  '#': 4,\n  'char': 'E'\n}, {\n  '#': 5,\n  'char': 'E♯'\n}, {\n  '#': 6,\n  'char': 'E𝄪'\n}], [{\n  '#': 3,\n  'char': 'F𝄫'\n}, {\n  '#': 4,\n  'char': 'F♭'\n}, {\n  '#': 5,\n  'char': 'F'\n}, {\n  '#': 6,\n  'char': 'F♯'\n}, {\n  '#': 7,\n  'char': 'F𝄪'\n}], [{\n  '#': 5,\n  'char': 'G𝄫'\n}, {\n  '#': 6,\n  'char': 'G♭'\n}, {\n  '#': 7,\n  'char': 'G'\n}, {\n  '#': 8,\n  'char': 'G♯'\n}, {\n  '#': 9,\n  'char': 'G𝄪'\n}], [{\n  '#': 7,\n  'char': 'A𝄫'\n}, {\n  '#': 8,\n  'char': 'A♭'\n}, {\n  '#': 9,\n  'char': 'A'\n}, {\n  '#': 10,\n  'char': 'A♯'\n}, {\n  '#': 11,\n  'char': 'A𝄪'\n}], [{\n  '#': 9,\n  'char': 'B𝄫'\n}, {\n  '#': 10,\n  'char': 'B♭'\n}, {\n  '#': 11,\n  'char': 'B'\n}, {\n  '#': 0,\n  'char': 'B♯'\n}, {\n  '#': 1,\n  'char': 'B𝄪'\n}]];\nconst positions = [[[0, 2], [6, 3], [1, 0]], [[1, 1], [0, 3], [6, 4]], [[1, 2], [2, 0], [0, 4]], [[2, 1], [1, 3], [3, 0]], [[2, 2], [3, 1], [1, 4]], [[3, 2], [2, 3], [4, 0]], [[4, 1], [3, 3], [2, 4]], [[4, 2], [5, 0], [3, 4]], [[5, 1], [4, 3]], [[5, 2], [6, 0], [4, 4]], [[6, 1], [5, 3], [0, 0]], [[6, 2], [0, 1], [5, 4]]];\nexport const pitchSpeller = (scales, transpose) => {\n  /*\n  Function returns correct character set for scale degree array. Only accepts heptatonic scales.\n  in: {'scaleName': [0,2,4,5,7,9,11]} -> out: {'scaleName': [{char: 'C', type: 'maj', num: 'I'}, {char: 'D', type: 'maj', num: 'II'}, ...]}\n  */\n\n  // console.log(scales, transpose)\n\n  Object.keys(scales).forEach(scaleName => {\n    const startPositions = positions[(scales[scaleName][0] + Number(transpose)) % 12];\n    const scaleLength = scales[scaleName].length;\n    var lowestCount = 999;\n    var winner = undefined;\n    console.log(startPositions);\n    for (let i = 0; i < startPositions.length; i++) {\n      const [sx, sy] = startPositions[i];\n\n      // if (i > 1) break\n\n      for (let j = 0; j < scaleLength - 1; j++) {\n        console.log((j + sx + 1) % scaleLength);\n      }\n\n      // const noteRange = [(sx+1 + i) % scaleLength for i in range(scaleLength-1)]\n\n      // const resultArray = [noteMatrix[sx,sy]['char']]\n      // const accidentalCount = accTransform(sy)\n    }\n  });\n\n  // for scaleName in scales:\n\n  //   if len(scales[scaleName]) != 7:\n  //     print(f\"{scaleName:<18}ERROR: Scale not heptatonic.\", end=\"\")\n  //     continue\n\n  //   # print(f\"{scaleName}:\")\n  //   startCoords = positions[(scales[scaleName][0]+ int(transpose)) % 12]\n  //   scaleLength = len(scales[scaleName])\n\n  //   lowestCount = 999\n  //   winner = None\n\n  //   for i, (sx, sy) in enumerate(startCoords):\n  //     # iter possible starting coordinates\n\n  //     # third coordinate is generally not needed\n  //     # few scales start with a double accidental\n  //     if i > 1:\n  //       break\n\n  //     # noteRange = [(sx+1 + i) % 7 for i in range(6)]\n  //     noteRange = [(sx+1 + i) % scaleLength for i in range(scaleLength-1)]\n\n  //     resultArray = [noteMatrix[sx,sy]['char']]\n  //     accidentalCount = accTransform(sy)\n\n  //     for j, x in enumerate(noteRange):\n  //     # iter notes in scale (first skipped)\n  //       matrixY = [noteMatrix[x,k]['#'] for k in range(5)] \n  //       try:\n  //         indexY = matrixY.index((scales[scaleName][j+1] + int(transpose)) % 12)\n  //         resultArray.append(noteMatrix[x, indexY]['char'])\n  //         accidentalCount += accTransform(indexY)\n  //       except:\n  //         accidentalCount = 999\n  //         break\n\n  //     # if len(resultArray) >= len(scales[scaleName]):\n  //     #   print(f\"• {accidentalCount:<3}{resultArray}\")\n\n  //     if accidentalCount < lowestCount:\n  //       lowestCount = accidentalCount\n  //       winner = resultArray\n\n  //   print(f\"{scaleName:<18}\", end=\"\"), print(*winner, sep=\", \")\n};","map":{"version":3,"names":["noteMatrix","positions","pitchSpeller","scales","transpose","Object","keys","forEach","scaleName","startPositions","Number","scaleLength","length","lowestCount","winner","undefined","console","log","i","sx","sy","j"],"sources":["C:/Users/Levi/Desktop/portfolio/src/Chart/pitchSpeller.ts"],"sourcesContent":["const noteMatrix: Array<Array<{'#': number, 'char': string}>> = [\n  [{'#': 10,'char': 'C𝄫'}, {'#': 11,'char': 'C♭'}, {'#': 0, 'char': 'C'}, {'#': 1, 'char': 'C♯'}, {'#': 2, 'char': 'C𝄪'}],\n  [{'#': 0, 'char': 'D𝄫'}, {'#': 1, 'char': 'D♭'}, {'#': 2, 'char': 'D'}, {'#': 3, 'char': 'D♯'}, {'#': 4, 'char': 'D𝄪'}],\n  [{'#': 2, 'char': 'E𝄫'}, {'#': 3, 'char': 'E♭'}, {'#': 4, 'char': 'E'}, {'#': 5, 'char': 'E♯'}, {'#': 6, 'char': 'E𝄪'}],\n  [{'#': 3, 'char': 'F𝄫'}, {'#': 4, 'char': 'F♭'}, {'#': 5, 'char': 'F'}, {'#': 6, 'char': 'F♯'}, {'#': 7, 'char': 'F𝄪'}],\n  [{'#': 5, 'char': 'G𝄫'}, {'#': 6, 'char': 'G♭'}, {'#': 7, 'char': 'G'}, {'#': 8, 'char': 'G♯'}, {'#': 9, 'char': 'G𝄪'}],\n  [{'#': 7, 'char': 'A𝄫'}, {'#': 8, 'char': 'A♭'}, {'#': 9, 'char': 'A'}, {'#': 10,'char': 'A♯'}, {'#': 11,'char': 'A𝄪'}],\n  [{'#': 9, 'char': 'B𝄫'}, {'#': 10,'char': 'B♭'}, {'#': 11,'char': 'B'}, {'#': 0, 'char': 'B♯'}, {'#': 1, 'char': 'B𝄪'}],\n]\n\nconst positions: Array<Array<[number, number]>> = [\n  [[0,2], [6,3], [1,0]],\n  [[1,1], [0,3], [6,4]],\n  [[1,2], [2,0], [0,4]],\n  [[2,1], [1,3], [3,0]],\n  [[2,2], [3,1], [1,4]],\n  [[3,2], [2,3], [4,0]],\n  [[4,1], [3,3], [2,4]],\n  [[4,2], [5,0], [3,4]],\n  [[5,1], [4,3]],\n  [[5,2], [6,0], [4,4]],\n  [[6,1], [5,3], [0,0]],\n  [[6,2], [0,1], [5,4]],\n]\n\nexport const pitchSpeller = (scales: {[key: string]: number[]}, transpose: number) => {\n  /*\n  Function returns correct character set for scale degree array. Only accepts heptatonic scales.\n  in: {'scaleName': [0,2,4,5,7,9,11]} -> out: {'scaleName': [{char: 'C', type: 'maj', num: 'I'}, {char: 'D', type: 'maj', num: 'II'}, ...]}\n  */\n\n  // console.log(scales, transpose)\n\n  Object.keys(scales).forEach(scaleName => {\n    const startPositions = positions[(scales[scaleName][0]+ Number(transpose)) % 12]\n    const scaleLength = scales[scaleName].length\n\n    var lowestCount = 999\n    var winner = undefined\n\n    console.log(startPositions)\n\n    for (let i = 0; i < startPositions.length; i++) {\n      const [sx, sy] = startPositions[i]\n\n      // if (i > 1) break\n\n      for (let j = 0; j < scaleLength-1; j++) {\n        console.log((j+sx+1) % scaleLength)\n      }\n      \n      // const noteRange = [(sx+1 + i) % scaleLength for i in range(scaleLength-1)]\n\n      // const resultArray = [noteMatrix[sx,sy]['char']]\n      // const accidentalCount = accTransform(sy)\n    }\n  })\n\n  // for scaleName in scales:\n\n  //   if len(scales[scaleName]) != 7:\n  //     print(f\"{scaleName:<18}ERROR: Scale not heptatonic.\", end=\"\")\n  //     continue\n\n  //   # print(f\"{scaleName}:\")\n  //   startCoords = positions[(scales[scaleName][0]+ int(transpose)) % 12]\n  //   scaleLength = len(scales[scaleName])\n\n  //   lowestCount = 999\n  //   winner = None\n    \n  //   for i, (sx, sy) in enumerate(startCoords):\n  //     # iter possible starting coordinates\n\n  //     # third coordinate is generally not needed\n  //     # few scales start with a double accidental\n  //     if i > 1:\n  //       break\n\n  //     # noteRange = [(sx+1 + i) % 7 for i in range(6)]\n  //     noteRange = [(sx+1 + i) % scaleLength for i in range(scaleLength-1)]\n\n  //     resultArray = [noteMatrix[sx,sy]['char']]\n  //     accidentalCount = accTransform(sy)\n\n  //     for j, x in enumerate(noteRange):\n  //     # iter notes in scale (first skipped)\n  //       matrixY = [noteMatrix[x,k]['#'] for k in range(5)] \n  //       try:\n  //         indexY = matrixY.index((scales[scaleName][j+1] + int(transpose)) % 12)\n  //         resultArray.append(noteMatrix[x, indexY]['char'])\n  //         accidentalCount += accTransform(indexY)\n  //       except:\n  //         accidentalCount = 999\n  //         break\n\n  //     # if len(resultArray) >= len(scales[scaleName]):\n  //     #   print(f\"• {accidentalCount:<3}{resultArray}\")\n    \n  //     if accidentalCount < lowestCount:\n  //       lowestCount = accidentalCount\n  //       winner = resultArray\n\n  //   print(f\"{scaleName:<18}\", end=\"\"), print(*winner, sep=\", \")\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}